import immer from"immer";var Ob=function(e){var r=new Set;return r.state=immer(e,function(e){}),r.onUpdate=function(e,t){var n={getMemo:e,memo:e(r.state),fn:t};return n.memo?t.apply(void 0,n.memo):t(),r.add(n),function(){return r.delete(n)}},r.onUpdateLazy=function(e,t){var n={getMemo:e,memo:e(r.state),fn:t};return r.add(n),function(){return r.delete(n)}},r.update=function(o){r.forEach(function(e){if(r.state=immer(r.state,function(e){o(e)}),e.memo){if(e.memo.length){for(var t=e.getMemo(r.state),n=!1,m=0;m<t.length;m++)if(t[m]!==e.memo[m]){n=!0;break}n&&(e.memo=t,e.fn.apply(e,e.memo))}}else e.fn()})},r};export{Ob};
//# sourceMappingURL=index.js.map
